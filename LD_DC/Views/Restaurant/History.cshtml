@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <title>绿都订餐</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <!-- 禁止百度转码显示 -->
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <!-- 优先使用 IE 最新版本和 Chrome -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <link href="~/Content/muicss/mui.min.css" rel="stylesheet" />

    <link href="~/Scripts/muicalendar/libs/swiper.min.css" rel="stylesheet" />
    <link href="~/Scripts/muicalendar/libs/calendar_base.css" rel="stylesheet" />
    <link href="~/Scripts/muicalendar/css/showcase.css" rel="stylesheet" />
    @*<link href="~/Content/muicss/mui.picker.min.css" rel="stylesheet" />
        <script src="~/Scripts/muijs/mui.poppicker.js"></script>*@
    <style>
        html,
        body {
            background-color: #ffffff;
        }

        body, .mui-content {
            background-color: #ffffff;
        }

        .mui-bar .mui-pull-left .mui-icon {
            padding-right: 5px;
            font-size: 28px;
        }

        .mui-bar .mui-btn {
            font-weight: normal;
            font-size: 17px;
        }

        .mui-bar .mui-btn-link {
            top: 1px;
        }

        .mui-bar .mui-title {
            background-image: -o-linear-gradient(90deg, rgba(219, 54, 164,1) 0%,rgba(254,220,27,0.5) 100%); /* Opera 11.1 - 12.0 */
            background-image: -moz-linear-gradient(90deg, rgba(219, 54, 164,1) 0%,rgba(254,220,27,0.5) 100%); /* Firefox 3.6 - 15 */
            background-image: -webkit-linear-gradient(90deg, rgba(219, 54, 164,1) 0%,rgba(254,220,27,0.5) 100%); /* Safari 5.1 - 6.0 */
            background-image: -ms-linear-gradient(90deg, rgba(219, 54, 164,1) 0%,rgba(254,220,27,0.5) 100%);
            background-image: linear-gradient(90deg, rgba(219, 54, 164,1) 0%,rgba(254,220,27,0.5) 100%); /* 标准的语法（必须放在最后）*/
            color: white;
        }

        .mui-bar-nav {
            background-color: #fdd71e;
        }

            .mui-bar-nav.mui-bar .mui-icon {
                background-color: #dc38a0;
            }

        .mui-table-view .mui-media-object {
            line-height: 42px;
            max-width: 84px;
            height: 42px;
        }

        .mui-btn-block {
            padding-top: 1rem;
            color: rgb(64,64,64);
            font-size: 1.0rem;
            font-weight: bold;
            display: block;
            padding: 0;
        }

        .mui-btn, button, input[type=button], input[type=reset], input[type=submit] {
            border: none;
        }

        /*换行*/
        .mui-ellipsis {
            overflow: hidden;
            white-space: inherit;
            text-overflow: ellipsis;
        }

        .mui-table-view-cell > a:not(.mui-btn) {
            position: relative;
            display: block;
            overflow: hidden;
            margin: -11px -15px;
            padding: inherit;
            white-space: inherit;
            text-overflow: ellipsis;
            color: inherit;
        }
        /*换行 end*/

        /*今日详情*/
        .details {
            margin: 7px 10px 10px 10px;
            min-height: 80px;
            /*border: 0.75px solid rgb(127,127,127);
            border-radius: 7px;
            -moz-border-radius: 7px; */ /* Old Firefox */
        }

        .detailsTitle {
            height: 32px;
            margin: 0px;
            border-bottom: 1px solid #ccc;
        }

        #rectangle {
            position: absolute;
            margin-top: 8px;
            margin-left: 5px;
            width: 4px;
            height: 16px;
            background: rgb(253, 215, 30);
        }

        .detailsP {
            width: 100px;
            color: rgb(64,64,64);
            margin-left: 9px;
            margin-top: -3px;
            font-size: 1.0rem;
            font-weight: bold;
        }

        .detailsInfo {
            height: 50px;
            margin: 0px;
            border-bottom: 1px solid #f7f7f7;
        }

        .divZW {
            font-size: 1.0rem;
            font-weight: bold;
            position: absolute;
            color: rgb(0, 148, 255);
            margin-top: 13px;
            margin-left: 23px;
        }

        .divWW {
            font-size: 1.0rem;
            font-weight: bold;
            position: absolute;
            color: rgb(0, 148, 255);
            margin-top: 13px;
            margin-left: 23px;
        }

        .divYJ {
            font-size: 0.8rem;
            position: absolute;
            margin-top: 13px;
            margin-left: 123px;
        }

        .divSJ {
            font-size: 0.8rem;
            position: absolute;
            margin-top: 13px;
            margin-left: 243px;
        }
        /*今日详情 end*/
        /*日历*/
        .em-week {
            display: flex;
            justify-content: space-around;
            padding-top: 0px;
            padding-bottom: 10px;
            color: #999999;
            font-size: 13px;
        }

        .mui-input-row .mui-btn {
            line-height: 1.1;
            float: none;
            padding: 10px 15px;
            margin: 2px auto;
            width: 100%;
        }

        .em-journal-title {
            width: 100%;
            display: block;
            height: 50px;
            line-height: 50px;
            background-color: #ffffff;
            /* border-bottom: 0.75px solid rgb(217,217,217); */
        }

        .em-per-block {
            float: left;
            width: 33%;
            color: #6b6b6b;
            font-size: 18px;
        }

        .em-calendar-active {
            background-color: #3C80E6;
            height: 10.285vw;
            width: 10.285vw;
        }


        .em-calendar-content .em-calendar-item {
            float: left;
            width: 14.285vw;
            height: 10.285vw;
            text-align: center;
            /* border: 1px solid #000; */
            border-radius: 10%;
            margin-bottom: 0px;
        }

            .em-calendar-content .em-calendar-item .day {
                display: block;
                padding-top: 0vw;
                font-size: 16px;
                color: #333333;
            }

        .em-calendar-content .isforbid0.em-calendar-item .day {
            display: block;
            padding-top: 0px;
            font-size: 16px;
            color: #D8D8D8;
        }


        /*日历 end*/
    </style>

    <script src="~/Scripts/jquery-1.10.2.min.js"></script>


    <script type="text/javascript">
        //function add_click() {
        //    //var eid = 111;
        //    //$.post("/Supplier/AddFood", { eid: eid }, function (response) {
        //    //    alert(response);
        //    //});
        //    alert("/Supplier/AddFood");
        //    window.location = "/Supplier/AddFood";
        //}


    </script>

</head>
<body>
    <header id="header" class="mui-bar mui-bar-nav ">
        <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left "></a>
        <h1 class="mui-title">@ViewData["rname"] | @ViewData["raddress"]</h1>
        @*<a class="mui-icon mui-icon-bars mui-pull-right"></a>*@
    </header>
    
    <div class="mui-content">
        <div class="em-journal-title">
            <div class="em-per-block pre">
                    <span class="mui-icon mui-icon-arrowleft"></span>
                    <span>上一月</span>
                </div>
            <div class="em-per-block mid">
                <span>...</span>
            </div>
            <div class="em-per-block next">
                    <span>下一月</span>
                    <span class="mui-icon mui-icon-arrowright"></span>
                </div>
        </div>
        <!--日历容器-->
        <div id="calendar">
        </div>



        <div class="details">
            <div class="detailsTitle">
                <div id="rectangle">
                    <p class="detailsP">
                        本月订餐情况
                    </p>
                </div>
            </div>
            <div class="detailsInfo">
                <div id="divInfo1">
                    <div class="divZW">全部</div>
                    @{
                        System.Data.DataTable dsThisMonth = (System.Data.DataTable)ViewData["dsThisMonth"];
                        if (dsThisMonth.Rows.Count > 0)
                        {
                            <div class="divYJ">预定 <span style="font-size: 1.0rem;">@dsThisMonth.Rows[0]["yj"].ToString()</span> 次</div>
                            <div class="divSJ">就餐 <span style="font-size: 1.0rem;">@dsThisMonth.Rows[0]["sj"].ToString()</span> 次</div>
                        }
                    }
                </div>
            </div>
            <div class="detailsTitle">
                <div id="rectangle">
                    <p class="detailsP">
                        今日订餐情况
                    </p>
                </div>
            </div>
            <div class="detailsInfo">
                <div id="divInfo1">
                    <div class="divZW">中餐</div>
                    @{
                        System.Data.DataTable dsTodayLunch = (System.Data.DataTable)ViewData["dsTodayLunch"];
                        if (dsTodayLunch.Rows.Count > 0)
                        {
                            <div class="divYJ">预定 <span style="font-size: 1.0rem;">@dsTodayLunch.Rows[0]["yj"].ToString()</span> 次</div>
                            <div class="divSJ">就餐 <span style="font-size: 1.0rem;">@dsTodayLunch.Rows[0]["sj"].ToString()</span> 次</div>
                        }
                    }
                </div>
            </div>

            <div class="detailsInfo">
                <div id="divInfo1">
                    <div class="divZW">会议中餐</div>
                    @{
                        System.Data.DataTable dsMeetingLunch = (System.Data.DataTable)ViewData["dsMeetingLunch"];
                        if (dsMeetingLunch.Rows.Count > 0)
                        {
                            <div class="divYJ">预定 <span style="font-size: 1.0rem;">@dsMeetingLunch.Rows[0]["yj"].ToString()</span> 次</div>
                            <div class="divSJ">就餐 <span style="font-size: 1.0rem;">@dsMeetingLunch.Rows[0]["sj"].ToString()</span> 次</div>
                        }
                    }
                </div>
            </div>
            
            <div class="detailsInfo">
                <div id="divInfo1">
                    <div class="divWW">晚餐</div>
                    @{
                        System.Data.DataTable dsTodayDinner = (System.Data.DataTable)ViewData["dsTodayDinner"];
                        if (dsTodayDinner.Rows.Count > 0)
                        {
                            <div class="divYJ">预定 <span style="font-size: 1.0rem;">@dsTodayDinner.Rows[0]["yj"].ToString()</span> 次</div>
                            <div class="divSJ">就餐 <span style="font-size: 1.0rem;">@dsTodayDinner.Rows[0]["sj"].ToString()</span> 次</div>
                        }
                    }
                </div>
            </div>

        </div>


        @*<div class="backToday">
                返回今天
            </div>*@
        <div id="rGuid" class="ui-alert" style="display:none">@ViewData["restaurantGuid"]</div>



        <script src="~/Scripts/muijs/mui.min.js"></script>
        <script src="~/Scripts/muicalendar/libs/swiper.min.js"></script>
        <script src="~/Scripts/muicalendar/libs/mustache.min.js"></script>
        <script src="~/Scripts/muicalendar/libs/calendar_base.js"></script>
        @*<script src="~/Scripts/muicalendar/js/calendar_showcase.js"></script>*@

        <script type="text/javascript">
            mui.init({

            });

            var customBiz = {
                init: function () {
                    var self = this;
                    // 初始化日历

                    var calendar = new Calendar({
                        // swiper滑动容器
                        container: "#calendar",
                        // 上一月节点
                        pre: ".pre",
                        // 下一月节点
                        next: ".next",
                        // 回到今天
                        backToToday: ".backToday",
                        // 业务数据改变
                        dataRequest: function (currdate, callback, _this) {
                            // 无日程安排
                            var data = [{
                                "date": "2018-04-18"
                            }, {
                                "date": "2018-04-17"
                            }, {
                                "date": "2018-04-16"
                            }];
                            callback && callback(data);
                        },
                        // 点击日期事件
                        onItemClick: function (item) {
                            var defaultDate = item.date;
                            // 设置标题
                            setTitle(defaultDate);
                            var rGuid = document.getElementById('rGuid').innerText; 

                            $.post("/Restaurant/UpdateHtml", { defaultDate: defaultDate, rGuid: rGuid }, function (response) {
                                //alert(response);
                                $(".details").html(response);
                            });

                            
                        },
                        // 滑动回调
                        swipeCallback: function (item) {
                            var defaultDate = item.date;
                            // 设置标题
                            setTitle(defaultDate);
                            var rGuid = document.getElementById('rGuid').innerText;

                            $.post("/Restaurant/UpdateHtml", { defaultDate: defaultDate, rGuid: rGuid }, function (response) {
                                //alert(response);
                                $(".details").html(response);
                            });
                        },
                        // 调试
                        isDebug: false
                    });
                    // 设置标题
                    var titleNode = document.querySelector('.mid span');

                    function setTitle(date) {
                        titleNode.innerText = date;
                    }

                }
            }

            // 初始化
            customBiz.init();
       
        </script>
</body>
</html>
